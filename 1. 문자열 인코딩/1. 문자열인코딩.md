# 1.1 문자열 인코딩이란
2진법을 사용하는 컴퓨터가 인간의 언어를 일정한 규칙에 따라 2진수로 변환하는 방식

여러국가에서 독자적인 인코딩 방식 사용 -> 모든 언어를 같은 규칙으로 표현할 수 있는 유니코드 방식 등장

문자집합(charset) : 사용할 수 있는 문자들의 집합 <br>
ex) 유니코드, ISO-8859, ASCII <br>

문자열 인코딩은 문자를 코드로 표현하는 방식 <br>
ex) 유니코드라는 문자 집합을 표현하는 문자열 인코딩은 UTF-8, UTF-16, UTF-32 <br>
그러나 흔히 문자 집합과 문자열 인코딩을 혼용해서 사용.

# 1.2 아스키 코드(ASCII)
처음으로 표준을 정립한 문자열 인코딩 방식

0부터 127까지 총 128개의 숫자를 사용.

영어를 제외한 다른 언어 표현 불가

# 1.3 EUC-KR(CP949)
한국어 문자 집합

문자 하나를 표현하기 위해 2바이트 사용.<br>
아스키 코드 문자를 표현할 때는 1바이트를 사용하기 때문에 아스키 코드와 호환됨.

# 1.4 유니코드(UTF-8, UTF-16, UTF-32)
각 국가별로 독자적인 문자열 인코딩을 사용하는 문제를 해결하기 위해 국제 표준화 기구에서 동일한 규칙으로 모든 언어를 표현할 수 있는 유니코드 문자 집합만듬.

# 1.5 UTF-8
8비트(1바이트)로 인코딩한다는 것을 의미.<br>
표현하려는 문자에 따라 최소 1바이트에서 최대 6바이트까지 사용.<br>
1바이트는 아스키 코드와 완벽 호환.<br>
대부분의 문자는 3바이트내로 처리 가능.<br>
4바이트 영역은 이모지, 5바이트는 고대문자.

# 1.6 UTF-16
16비트(2바이트)로 인코딩한다는 것을 의미.<br>
2바이트 또는 4바이트만 사용하기 떄문에 아스키 코드와 호환X.<br>
문자의 종류에 따라
- 기본 다국어 평면(BMP)
- 보충 다국어 평면(SMP)
- 상형 문자 보충 평면(SIP)
- 특수 목적 보충 평면(SSP)

바이트 수는 표현하려는 문자가 어떤 평면에 속하는지에 따라 결정됨.<br>
BMP에는 U+0000에서 U+FFFF까지 범위에 속하는 문자가 있음.<br>
이 범위에는 한글, 한자를 포함한 여러 다국어가 있고 2바이트로 인코딩<br>
BMP 범위를 벗어나는 문자들은 4바이트로 인코딩(쐐기문자, 키프로스 음절 문자, 리키아 문자 등...)

## 바이트 순서 표시
UTF-16과 UTF-32는 바이트 순서 표시(BOM)사용.<br>
문자열 가장 맨 앞 2바이트에 0xFEFF(유니코드 U+FEFF)로 표기.<br>
0xFE와 0xFF중 어떤 문자가 먼저 오는지에 따라 리틀 엔디언(LE)과 빅 엔디언(BE)로 나뉨.<br>
사용 이유 : CPU 설계에 따라 바이트 값을 처리하는 순서가 다르기 떄문.<br>
같은 0xFEFF를 CPU가 읽을 때 리틀 엔디언 방식은 0xFF 0xFE순으로 읽으며, 빅 엔디언 방식은 0xFE 0xFF.

종류|0x1234 표현|0x12345678 표현
---|---|---
빅 엔디언|12 34|12 34 56 78
리틀 엔디언|34 12|78 56 34 12

오늘날 대부분의 개인 컴퓨터는 리틀 엔디언 방식.

UTF-8에도 BOM이 있지만(0xFE, 0xBB, 0xBF), 1바이트 단위로 글자를 변환하기 때문에, 글자를 읽는 순서가 달라도 영향X.

## UTF-16 글자 인식: 4바이트의 경우
리틀 엔디언을 기준으로 두 번째 바이트가 110110으로 시작하면 4바이트를 읽어 처리.<br>
110110yy yyxxxxxx 110111xx xxxxxxxx<br>
앞 2바이트에서 110110을 제외한 모든 값과 뒤에 오는 2바이트의 110111을 제외한 모든 값을 합쳐 유니코드 만듬.

UTF-32는 모든 문자를 고정된 4바이트 길이로 사용. 이외에 UTF-16과 동일.

# 1.7 마치며
- UTF-8
  - 오늘날 가장 많이 사용하는 문자열 인코딩이며 최소 1바이트, 최대 6바이트를 사용. 그러나 대부분 4바이트 내로 처리.
  - 아스키 코드와 호환 가능.
  - 윈도우, 자바. 임베디드를 제외한 거의 모든 환경에서의 문자열 처리 표준.
  - JSON은 UTF-8인코딩만 사용, 다른 문자열 인코딩은 표준에서 지원X
- UTF-16
  - 자바와 윈도우는 유니코드를 사용하기 전부터 고정된 2바이트 길이의 문자 집합을 사용함. 그래서 UTF-16은 멀티 바이트라고도함. 두 환경에서의 호환성 외에 UTF-16을 사용할 별다른 이유는없음.
  - 2바이트 또는 4바이트 길이의 문자열을 사용하며, 아스키 코등하 호환되지 않음.
  - UTF-16 기반 환경에서 UTF-8을 사용할 때는 사용 영역을 명확히 구분하는게 좋음. 예를 들어 자바 기반 웹 서비스는 기본적으로 UTF-16을 사용하되, 외부(데이터베이스와 브라우저 간)통신 시 UTF-8로 변환하여 사용.
- UTF-32
  - 4바이트를 고정적으로 사용.
  - 반드시 UTF-32를 사용해야 하는 환경이 아니라면 사용X.
- EUC-KR
  - 한국에서 독자적으로 사용하는 문자열 인코딩으로 고정된 2바이트를 사용.
  - 가능하다면 UTF-8로 바꾸는게 좋지만 현실적으로 어려운 경우가 많음. UTF-16과 마찬가지로 경계를 명확히 구분하여 사용.